# jstool (jsmin)

inherit: [copy]

checkoutSCM:
  - scm: cvs
    cvsroot: ${CVSROOT}
    module: jstool

multiPackage:
  bin:
    inherit: [make]
    depends:
      - libs::afl-bin
      - tools::buildsys
    buildScript: |
      perl "${BOB_DEP_PATHS[tools::buildsys]}/Make.pl" IN="$1" CXX="${CXX}" CXXFLAGS="${CXXFLAGS}" LDFLAGS="${LDFLAGS}" TARGET="${TARGET:-POSIX}" RUN="${RUN:-}" AFL_DIR="${BOB_DEP_PATHS[libs::afl-bin]}"
      doMake
      doMake install

    packageScript: |
      shallowCopy "$1/result" .

  host:
    inherit: ["env::host"]
    depends: ["tools::jstool-bin"]
    buildScript: |
      shallowCopy "${BOB_DEP_PATHS[tools::jstool-bin]}" .
    packageScript: |
      shallowCopy "$1" .
