# c2ng (PCC2 next generation)

inherit:
  - copy

depends:
  - libs::cxxtest

checkoutVars: [CVSROOT]
checkoutSCM:
  scm: cvs
  cvsroot: ${CVSROOT}
  module: c2ng

multiPackage:
  bin:
    inherit: [make, buildsys]
    depends:
      - libs::afl-bin

    buildScript: |
      doGenerate IN="$1" CXXTESTDIR="${BOB_DEP_PATHS[libs::cxxtest]}" TARGET="${TARGET:-POSIX}" AFL_DIR="${BOB_DEP_PATHS[libs::afl-bin]}"
      doMake
      doMake test
      doMake install

    packageScript: |
      shallowCopy "$1"/result .

  host:
    inherit:
      - env::host
    depends:
      - planets::c2ng-bin
    buildScript: |
      shallowCopy "${BOB_DEP_PATHS[planets::c2ng-bin]}" .
    packageScript: |
      shallowCopy "$1" .
